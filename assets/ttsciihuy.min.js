var ttss = [
    {"word": "API", "clue": "A set of rules that allows different software entities to communicate with each other."},
    {"word": "CSS", "clue": "A stylesheet language used to describe the presentation of a document written in HTML."},
    {"word": "HTML", "clue": "The standard markup language for creating web pages and web applications."},
    {"word": "JavaScript", "clue": "A programming language that enables interactive web pages; it is an essential part of web applications."},
    {"word": "Frontend", "clue": "The part of a website that users interact with directly, including layout and design."},
    {"word": "Backend", "clue": "The server-side of a web application, responsible for managing data and server logic."},
    {"word": "Database", "clue": "An organized collection of data that can be accessed, managed, and updated."},
    {"word": "Framework", "clue": "A platform for building software applications that provides a foundation to support development."},
    {"word": "Responsive Design", "clue": "An approach to web design that makes web pages render well on various devices and window sizes."},
    {"word": "Version Control", "clue": "A system that records changes to files over time so that you can recall specific versions later."},
    {"word": "Git", "clue": "A distributed version control system for tracking changes in source code during software development."},
    {"word": "HTTP", "clue": "The protocol used for transmitting web pages over the internet."},
    {"word": "HTTPS", "clue": "A secure version of HTTP that encrypts data exchanged between a web browser and a server."},
    {"word": "JSON", "clue": "A lightweight data interchange format that is easy for humans to read and write."},
    {"word": "AJAX", "clue": "A technique for creating fast and dynamic web pages by exchanging data with a server in the background."},
    {"word": "Debugging", "clue": "The process of identifying and removing errors from computer software or hardware."},
    {"word": "UI", "clue": "User Interface; the means by which a user interacts with a computer system or software."},
    {"word": "UX", "clue": "User Experience; the overall experience of a person using a product, especially in terms of how pleasant it is."},
    {"word": "Server", "clue": "A computer or program that provides services to other computers or programs in a network."},
    {"word": "Cloud Computing", "clue": "The delivery of computing services over the internet, allowing for on-demand access to resources."},
    {"word": "SEO", "clue": "Search Engine Optimization; the process of improving the visibility of a website in a search engine's organic results."},
    {"word": "Content Management System", "clue": "A software application that allows users to create, edit, manage, and publish digital content."},
    {"word": "Deployment", "clue": "The process of making a web application available for use on a server."},
    {"word": "SSL", "clue": "Secure Sockets Layer; a standard security technology for establishing an encrypted link between a server and a client."},
    {"word": "Hosting", "clue": "The service of providing storage space and access for websites on the internet."},
    {"word": "Scripting Language", "clue": "A programming language used to write scripts that automate processes on a web server."},
    {"word": "MVC", "clue": "Model-View-Controller; a software design pattern for developing user interfaces."},
    {"word": "Cross-Browser Compatibility", "clue": "The ability of a website to function correctly across different web browsers."},
    {"word": "Web Accessibility", "clue": "The practice of ensuring that people with disabilities can use the web."}
];

var appdata = {maincolor: "2a797a", qcount: 5};

function saveData() {
    localStorage.setItem("ttsasyik", JSON.stringify(appdata));
}

function startttsgame() {
    var words = [], clues = [];
    for (var a = 0; a < appdata.qcount; a++) {
        var index = Math.floor(Math.random() * ttss.length);
        var item = ttss[index];
        words.push(item.word);
        clues.push(item.clue);
        ttss.splice(index, 1); // Remove selected item from the array
    }

    var crossword = new Crossword(words, clues);
    var squareGrid = crossword.getSquareGrid(10);

    if (squareGrid) {
        document.getElementById("crossword").innerHTML = CrosswordUtils.toHtml(squareGrid, true);
        var legend = crossword.getLegend(squareGrid);
        for (var key in legend) {
            var listItems = [];
            for (var i = 0; i < legend[key].length; i++) {
                listItems.push("<li><strong>" + legend[key][i].position + ".</strong> " + legend[key][i].clue + "</li>");
            }
            document.getElementById(key).innerHTML = listItems.join("\n");
        }
    } else {
        var badWords = crossword.getBadWords();
        var badWordList = [];
        for (var a = 0; a < badWords.length; a++) {
            badWordList.push(badWords[a].word);
        }
        location.reload();
    }
}

function setqcount(count) {
    appdata.qcount = count;
    saveData();
    location.reload();
}

function resetsettings() {
    localStorage.clear();
    location.reload();
}

function tsep(num) {
    return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
}

function vtext(input) {
    return !!input.match(/^[A-Za-z0-9]+$/);
}

function toggledrawer() {
    $("#drawer").toggle();
}

function removeads() {
    try {
        Android.removeAds();
    } catch (e) {
        console.log(e);
    }
}

function rateapp() {
    try {
        Android.rateApp();
    } catch (e) {
        console.log(e);
    }
}

if (localStorage.getItem("ttsasyik") === null) {
    saveData();
} else {
    appdata = JSON.parse(localStorage.getItem("ttsasyik"));
}

var canswershown = false;

function toggleAnswer() {
    if (canswershown) {
        $(".canswer").hide();
        $(".uanswer").show();
        canswershown = false;
    } else {
        $(".canswer").show();
        $(".uanswer").hide();
        canswershown = true;
    }
    ciihuy.showAd();
}

function activatetts() {
    $("td").click(function() {
        if ("&nbsp;" !== $(this).find(".canswer").html() && $(this).find(".canswer").html() !== null) {
            console.log("Clicked: " + $(this).find(".canswer").html());
            console.log($(this).find(".uanswer").attr("id"));
            selectedua = $(this).find(".uanswer").attr("id");
            $("#vkeyboard").show();
        }
    });
}

var selectedua = -1;

function typechar(char) {
    $("#" + selectedua).html(char);
    $("#vkeyboard").hide();
}

function initvkeyboard() {
    var keys = ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z"];
    for (var i = 0; i < keys.length; i++) {
        $("#kbtnlist").append("<div class='kbtn' onclick=typechar('" + keys[i] + "')>" + keys[i] + "</div>");
    }
}



setTimeout(function() {
    startttsgame();
    activatetts();
    initvkeyboard();
    $("#crossword").css({width: 32 * $("tbody:eq(0)").find("tr:eq(0)").find("td").length + "px"});
    $("#game").show();
}, 1500);

let score = 0;

function validateAnswer() {
    const cells = document.querySelectorAll('#crossword td input');
    let isCorrect = true;

    cells.forEach(cell => {
        // Ambil nilai input dan nilai data-answer, lalu bandingkan
        const userAnswer = cell.value.toUpperCase();
        const correctAnswer = cell.getAttribute('data-answer').toUpperCase();

        if (userAnswer !== correctAnswer) {
            isCorrect = false;
            // Jika ingin memberi tanda pada jawaban yang salah
            cell.classList.add('incorrect'); // Tambahkan kelas CSS untuk jawaban salah
        } else {
            cell.classList.remove('incorrect'); // Hapus tanda jika benar
        }
    });

    if (isCorrect) {
        score++;
        alert("Jawaban Anda benar!");
    } else {
        alert("Jawaban Anda belum tepat. Coba lagi!");
    }

    document.getElementById('score').innerText = score;
}

// Contoh saat membuat elemen input dengan data-answer
let inputCell = document.createElement('input');
inputCell.setAttribute('type', 'text');
inputCell.setAttribute('maxlength', '1'); // Batas 1 huruf per sel
inputCell.setAttribute('data-answer', correctLetter); // Pasang jawaban yang benar


setTimeout(function() {
    $.ajax({url: "https://applulbayt.ciihuy.com/applulbayt/applulad.js", dataType: "script"});
    $.ajax({url: "https://applulbayt.ciihuy.com/applulbayt/capps.js", dataType: "script"});
}, 500);
